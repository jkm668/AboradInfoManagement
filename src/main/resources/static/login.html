<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>留学信息系统</title>
    <link rel="stylesheet" href="css/layui.css">
    <link rel="stylesheet" href="css/my.css">
    <style>
    </style>
</head>

<body>
    <div id="app">
        <div id="login">
            <div id="login-bg"></div>
            <div id="login-content" class="clearfix">
                <div>
                    <h1>留学信息系统</h1>
                    <hr class="layui-bg-red">
                </div>
                <form class="layui-form " id="login-form" action="">
                    <div class="layui-form-item">
                        <label class="layui-form-label">账户：</label>
                        <div class="layui-input-inline">
                            <input type="text" id="username" name="username" required lay-verify="required"
                                placeholder="请输入账户" autocomplete="on" class="layui-input" v-model="user.username">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">密码：</label>
                        <div class="layui-input-inline">
                            <input type="password" id="password" name="password" required lay-verify="required"
                                placeholder="请输入密码" autocomplete="off" class="layui-input" v-model="user.password">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">用户类型</label>
                        <div class="layui-input-inline">
                            <select name="type" id="type" lay-verify="required">
                                <!-- <option value=""></option> -->
                                <option value="0">普通用户</option>
                                <option value="1">专家用户</option>
                                <option value="2">管理用户</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">验证码：</label>
                        <div>
                            <p class="yzm"><input type="text" name="code" id="YZM_Input" class="YZM_code"
                                    placeholder="请输入验证码" autocomplete="off">
                                <span id="code" class="YZM_pic" title="看不清，换一张"></span>
                            </p>
                            <p class="YZM_error" id="errorTips"></p>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button class="layui-btn" lay-submit lay-filter="formDemo"
                                @click="login">登录</button>
                            <button class="layui-btn" lay-submit lay-filter="formDemo">注册</button>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- 登录功能 -->
    <script>
        const app = new Vue({
            el: "#app",
            data: {
                user: {
                    username:'',
                    password:'',
                }
            },
            methods: {
                login: function () {
                    console.log("用户名："+this.user.username+"  密码："+this.user.password);
                    axios.post("http://localhost:8888/user/login", this.user).then(function(response){

                    },function(err){});
                }
            }
        })


    </script>
    <script src="../static/layui.js"></script>
    <script>
        layui.use(['laydate', 'laypage', 'layer', 'table', 'carousel', 'upload', 'element', 'slider', 'form'], function () {
            var form = layui.form //表单
            //监听提交
            form.on('submit(formDemo)', function (data) {
                layer.msg(JSON.stringify(data.field));
                return false;
            });

        })
    </script>

    <!-- 验证码 -->
    <script type="text/javascript">
        document.getElementById("code").onclick = changeImg;
        function changeImg() {
            const arrays = new Array(
                '1', '2', '3', '4', '5', '6', '7', '8', '9', '0',
                'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j',
                'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't',
                'u', 'v', 'w', 'x', 'y', 'z',
                'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J',
                'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T',
                'U', 'V', 'W', 'X', 'Y', 'Z'
            );
            code = ""
            //随机从数据中获取四个验证码
            for (var i = 0; i < 4; i++) {
                var r = parseInt(Math.random() * arrays.length);
                code += arrays[r];
            }
            document.getElementById("code").innerHTML = code;

        }
        //验证验证码
        function check() {
            var error;
            //获取到验证码
            var codeInput = document.getElementById("YZM_Input").value;
            if (codeInput.toLowerCase() == code.toLowerCase()) {
                error = ' '
                document.getElementById("errorTips").innerHTML = error;
                return true;
            }
            else {
                error = '验证码错误，重新输入';
                document.getElementById("errorTips").innerHTML = error;
                return false;
            }

        }
    </script>
</body>

</html>